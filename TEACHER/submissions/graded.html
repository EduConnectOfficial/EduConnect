<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EduConnect Teacher - Graded Submissions</title>
  <!-- Icons & Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <!-- Global & Page CSS -->
  <link rel="stylesheet" href="../dashboard/dashboard.css"/>
  <link rel="stylesheet" href="graded.css"/>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <div class="main">
      <!-- Header -->
      <header class="header-top d-flex align-items-center justify-content-between px-4">
        <img src="/assets/educonnect_logo.png" alt="EduConnect Logo" class="logo-header" />
        <div class="search-box position-relative">
          <input type="text" class="form-control" placeholder="Search graded..."/>
          <i class="fas fa-search position-absolute"
             style="top:50%; right:15px; transform:translateY(-50%);"></i>
        </div>
        <button class="profile-btn btn btn-link text-decoration-none" onclick="logoutUser()">
          <i class="fas fa-user-circle fa-2x"></i>
          <span id="Username" class="username ms-2 fw-semibold">Teacher Name</span>
        </button>
      </header>

      <!-- Page Content -->
      <section class="content">
        <!-- Title & Actions -->
        <div class="row align-items-center mb-3">
          <div class="col-md-6">
            <h1 class="page-title mb-0">Graded Submissions</h1>
          </div>
          <div class="col-md-6 text-md-end mt-2 mt-md-0">
            <button class="btn btn-outline-secondary me-2" onclick="viewUngraded()">
              <i class="bi bi-inbox-fill"></i> View Ungraded
            </button>
            <button class="btn btn-link help-btn" onclick="window.open('/help/submissions.html','_blank')">
              <i class="bi bi-question-circle"></i> Help
            </button>
          </div>
        </div>

        <!-- Filters -->
        <form id="filterForm" class="filter-bar mb-4">
          <div class="row g-3">
            <div class="col-sm-3">
              <label for="filterClass" class="form-label">Class</label>
              <select id="filterClass" class="form-select">
                <option value="">All Classes</option>
                <option>STEM-11A</option>
                <option>HUMSS-12B</option>
                <option>ABM-11C</option>
              </select>
            </div>
            <div class="col-sm-3">
              <label for="filterModule" class="form-label">Module</label>
              <select id="filterModule" class="form-select">
                <option value="">All Modules</option>
                <option>Cell Biology</option>
                <option>World Wars</option>
                <option>Lighting & Composition</option>
              </select>
            </div>
            <div class="col-sm-2">
              <label for="filterGradedDate" class="form-label">Graded Date</label>
              <input type="date" id="filterGradedDate" class="form-control"/>
            </div>
            <div class="col-sm-2">
              <label for="filterScore" class="form-label">Min Score</label>
              <input type="number" id="filterScore" class="form-control" placeholder="e.g. 75"/>
            </div>
            <div class="col-sm-2 d-flex align-items-end">
              <button type="submit" class="btn btn-primary w-100">Filter</button>
            </div>
          </div>
        </form>

        <!-- Graded Table -->
        <div class="table-responsive">
          <table class="table table-striped align-middle" id="gradedTable">
            <thead class="table-light">
              <tr>
                <th>Student</th>
                <th>Class</th>
                <th>Module</th>
                <th>Title</th>
                <th>Submitted At</th>
                <th>Graded At</th>
                <th>Score</th>
                <th class="text-center">Feedback</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Ana Santos</td>
                <td>STEM-11A</td>
                <td>Cell Biology</td>
                <td>Quiz 1</td>
                <td>2025-08-08 14:30</td>
                <td>2025-08-08 15:00</td>
                <td><span class="badge bg-success">92%</span></td>
                <td class="text-center">
                  <button class="btn btn-sm btn-outline-primary" onclick="viewFeedback(1)">View</button>
                </td>
              </tr>
              <tr>
                <td>Juan Dela Cruz</td>
                <td>HUMSS-12B</td>
                <td>World Wars</td>
                <td>Assignment 2</td>
                <td>2025-08-08 11:00</td>
                <td>2025-08-08 12:15</td>
                <td><span class="badge bg-success">88%</span></td>
                <td class="text-center">
                  <button class="btn btn-sm btn-outline-primary" onclick="viewFeedback(2)">View</button>
                </td>
              </tr>
              <tr>
                <td>María Reyes</td>
                <td>ABM-11C</td>
                <td>Financial Accounting</td>
                <td>Quiz 3</td>
                <td>2025-08-07 16:45</td>
                <td>2025-08-07 17:30</td>
                <td><span class="badge bg-success">79%</span></td>
                <td class="text-center">
                  <button class="btn btn-sm btn-outline-primary" onclick="viewFeedback(3)">View</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>

  <!-- Sidebar Logic -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("/components/sidebar.html")
        .then(r => r.text())
        .then(html => {
          document.getElementById("sidebar-container").innerHTML = html;
          const sb = document.querySelector(".sidebar"),
                db = document.querySelector(".dashboard");
          if (sb && db) {
            sb.addEventListener("mouseenter", () => db.classList.add("sidebar-expanded"));
            sb.addEventListener("mouseleave", () => db.classList.remove("sidebar-expanded"));
          }
          document.querySelectorAll('.has-submenu .submenu-toggle').forEach(t => {
            t.addEventListener('click', e => {
              e.preventDefault();
              const p = t.closest('.has-submenu');
              p.classList.toggle('open');
              t.setAttribute('aria-expanded', p.classList.contains('open'));
            });
          });
        });
    });

    // Handlers
    document.getElementById('filterForm').addEventListener('submit', e => {
      e.preventDefault();
      alert('Filter applied (stub)');
    });

    function viewUngraded() {
      window.location.href = '/TEACHER/submissions/submission.html';
    }

    function viewFeedback(id) {
      alert(`Viewing feedback for submission ${id} (stub)`);
      // TODO: open feedback modal or page
    }

    function logoutUser() {
      alert('Logging out…');
    }

    // Auth stub
    const userData = { role:'teacher', username:'Teacher Name' };
    if (userData.role!=='teacher') {
      location.href='/TEACHER/login/login.html';
    } else {
      document.getElementById('Username').textContent = userData.username;
    }
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
