/* =======================
   1) Variables
======================= */
:root {
  --bg: #f6f8fa;
  --text: #1f2328;
  --muted: #6a737d;
  --card: #fff;
  --border: #e5e7eb;

  --brand-dark-1: #4A1A0C;
  --brand-dark-2: #7A2810;
  --brand-accent-1: #FF6A00;
  --brand-accent-2: #B03C10;

  --card-radius: 14px;
  --radius: 14px;
}

/* =======================
   2) Base
======================= */
html,
body {
  height: 100%;
  margin: 0;
  background: var(--bg);
  color: var(--text);
}

/* =======================
   3) Layout
======================= */
.dashboard { display: flex; min-height: 100vh; }

.main {
  margin-left: 70px;
  width: calc(100% - 70px);
  transition: margin-left .3s ease, width .3s ease;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--bg);
}

.sidebar:hover ~ .main {
  margin-left: 220px;
  width: calc(100% - 220px);
}

/* =======================
   4) Header
======================= */
.header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: linear-gradient(to bottom, #4A1A0C, #7A2810);
  color: #fff;
  box-shadow: 0 4px 8px rgba(0, 0, 0, .1);
  position: sticky;
  top: 0;
  z-index: 10;
}

.logo-header { height: 45px; }

.search-box {
  position: relative;
  flex: 1;
  max-width: 500px;
  margin: 0 20px;
}
.search-box input {
  width: 100%;
  padding: 10px 14px;
  border-radius: 30px;
  border: none;
  outline: none;
}
.search-box i {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
}

.profile-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  background: none;
  border: none;
  color: #fff;
  font-size: 20px;
  cursor: pointer;
}
.profile-btn .username { font-size: 14px; }

/* =======================
   5) Page / Text Utilities
======================= */
.content { padding: 24px; }

.page-title {
  font-weight: 700;
  font-size: 1.6rem;
  text-align: center;
  margin: 4px 0 18px;
}
.page-title.brand {
  background: linear-gradient(90deg, var(--brand-dark-1), var(--brand-dark-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.text-light { color: #FFD8A9 !important; }
.small-muted { font-size: .9rem; color: var(--muted); }
.muted { color: #6b7280; }
.hint { color: var(--muted); font-size: .9rem; }

.visually-hidden {
  position: absolute !important;
  clip: rect(0 0 0 0) !important;
  clip-path: inset(50%) !important;
  height: 1px !important;
  width: 1px !important;
  overflow: hidden !important;
  white-space: nowrap !important;
}

/* =======================
   6) Cards
======================= */
.ui-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
}

.ui-card.card-themed {
  border-radius: var(--card-radius);
  border: 1px solid rgba(0, 0, 0, .06);
  box-shadow: 0 10px 24px rgba(0, 0, 0, .10);
  overflow: hidden;
}

.ui-card-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}
.ui-card.card-themed .ui-card-head {
  margin: -16px -16px 12px -16px;
  padding: 12px 16px;
  background: linear-gradient(90deg, var(--brand-dark-1), var(--brand-dark-2));
  color: #FFD8A9;
  border-bottom: 1px solid rgba(255, 255, 255, .1);
}

.ui-card-title {
  font-size: 1rem;
  font-weight: 700;
  margin: 0;
  display: flex;
  gap: 8px;
  align-items: center;
}
.ui-card.card-themed .ui-card-title i { color: #FFD8A9; }

.ui-subtext { font-size: .9rem; color: #FFD8A9; }

/* Variant (compact header strip look) */
.ui-card{background:#fff;border:1px solid #e5e7eb;border-radius:var(--radius);box-shadow:0 10px 24px rgba(0,0,0,.06);overflow:hidden}
.ui-card-head{display:flex;justify-content:space-between;align-items:center;background:linear-gradient(90deg,var(--brand-dark-1, #2a3f5f),var(--brand-dark-2, #20334b));color:#FFD8A9;padding:12px 16px}
.ui-card-title{margin:0;font-size:1.05rem;font-weight:700;display:flex;gap:.5rem;align-items:center;color:#ffe9ca}
.ui-subtext{font-size:.9rem;opacity:.9}
.brand{color:#20334b}

/* =======================
   7) Buttons & Inputs
======================= */
.btn-amber {
    background: linear-gradient(to bottom, var(--brand-accent-1), var(--brand-accent-2));
    border: none;
    color: #fff;
    border-radius: 999px;
    padding: .55rem .9rem;
    font-size: 1rem;
    font-weight: 500;
    transition: background .3s ease, transform .2s ease, box-shadow .2s ease;
}

.btn-amber:hover {
    background: linear-gradient(to bottom, #ff8533, #cc3300);
    transform: scale(1.05);
    color: #fff;
}

.btn-amber:focus-visible {
    outline: 2px solid #ffc299;
    outline-offset: 2px;
    box-shadow: 0 0 0 .15rem rgba(255, 106, 0, .25);
}

.btn-amber-outline {
    background: transparent;
    color: var(--brand-accent-1);
    border: 1px solid var(--brand-accent-1);
    border-radius: 999px;
    padding: .45rem 1.1rem;
    font-weight: 500;
    transition: background .2s, color .2s, transform .2s, border-color .2s;
}

.btn-amber-outline:hover {
    background: var(--brand-accent-1);
    color: #fff;
    transform: translateY(-1px);
}

.form-control:focus,
.form-select:focus {
  border-color: var(--brand-accent-2);
  box-shadow: 0 0 0 .2rem rgba(255, 106, 0, .18);
}

/* Logout button reveal on sidebar hover (container variant) */
.logout-btn {
  background: linear-gradient(to bottom, #FF6A00, #B03C10);
  border: none;
  padding: 0.6rem 1.5rem;
  border-radius: 20px;
  color: white;
  font-size: 1rem;
  font-weight: bold;
  text-decoration: none;
  white-space: nowrap;
  opacity: 0;
  transition: opacity .3s ease, color .3s;
  user-select: none;
  cursor: pointer;
}
#sidebar-container:hover .logout-btn { opacity: 1; }
.logout-btn:hover { opacity: .85; color: #4A1A0C; }

/* Neutral secondary (modal footer) */
.btn-close-footer {
    background-color: #6a737d !important;
    color: #fff !important;
    border: none !important;
    border-radius: 999px !important;
    padding: .5rem 1.2rem !important;
    font-weight: 500;
}

.btn-close-footer:hover,
.btn-close-footer:focus {
    transform: scale(1.04);
}


/* =======================
   8) Modals
======================= */
.modal-header {
  background: linear-gradient(to bottom, #4A1A0C, #7A2810);
  color: #fff;
  border-bottom: none;
}
.modal-header .modal-title { font-weight: 600; color: #fff; }
.modal-header .btn-close { filter: brightness(0) invert(1); opacity: .9; }
.modal-header .btn-close:hover { opacity: 1; }

.modal-body { color: black; }

.modal.show {
  display: flex !important;
  align-items: center;
  justify-content: center;
  --bs-modal-margin: 0;
  padding: 0 !important;
}
.modal.show .modal-dialog {
  margin: 0 !important;
  max-width: 640px;
  width: calc(100% - 2rem);
}
.modal.show .modal-content {
  max-height: min(90vh, 800px);
  overflow: auto;
  border-radius: 12px;
}
.modal.show .modal-content {
  border: none;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 18px 40px rgba(0,0,0,.25);
}

@media (max-width: 576px) {
  .modal.show .modal-dialog {
    width: calc(100% - 1.5rem);
    max-width: 100%;
  }
}

/* Preview modal (match edit page) */
#filePreviewModal .modal-dialog { max-width: 96vw; }
#filePreviewModal .modal-content { height: 92vh; display:flex; flex-direction:column; }
#filePreviewModal .modal-body { flex:1 1 auto; padding:0; background:#f8fafc; position:relative; }
.preview-wrap { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.preview-wrap iframe,
.preview-wrap embed,
.preview-wrap object,
.preview-wrap img,
.preview-wrap video,
.preview-wrap audio { width:100%; height:100%; border:0; object-fit:contain; background:#fff; }
.preview-fallback { max-width:720px; margin:0 auto; padding:2rem; text-align:center; }
.spinner-wrap { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:#fff; }

/* =======================
   9) Attachments List
======================= */
.file-list { list-style:none; padding-left:0; margin:0; }
.file-item {
  display:flex; align-items:center; gap:.5rem;
  padding:.5rem .75rem; border:1px solid #e5e7eb; border-radius:10px; background:#fff;
}
.file-item + .file-item { margin-top:.5rem; }
.file-name { flex:1 1 auto; min-width:0; }
.file-name span { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:inline-block; max-width:100%; }
.btn-icon { padding:.375rem .5rem; }

/* Badges (match edit page) */
.badge-soft { background:#f1f5f9; border:1px solid #e2e8f0; border-radius:999px; padding:.2rem .5rem; font-size:.75rem; }
.badge-rubric { background:#fff3cd; border-color:#ffe69c; }
.badge-file { background:#eef2ff; border-color:#c7d2fe; }
.badge-link { background:#ecfeff; border-color:#a5f3fc; }
.badge-stage { background:#dcfce7; border-color:#86efac; }

/* Misc text helpers */
.file-too-large { color:#b91c1c; font-weight:600; }
.text-name { color:#ffe9ca; opacity:.9; }

/* =======================
   10) Lessons / Pager
======================= */
.lesson-toolbar { display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }

.pager-chip {
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.2rem .6rem; border-radius:999px; border:1px solid var(--border);
  font-size:.8rem; background:#fff; color:#374151;
}

.step-dots { display:flex; gap:6px; align-items:center; }
.step-dots .dot { width:8px; height:8px; border-radius:50%; background:#d0d7de; }
.step-dots .dot.active { background:#FF6A00; }

.lesson-page.card { border:1px solid var(--border); }

.assign-card { cursor:pointer; border:1px solid var(--border); border-radius:12px; transition:.2s; }
.assign-card.selected { outline:2px solid var(--brand-accent-1); box-shadow:0 0 0 3px rgba(255,106,0,.15); }
.assign-card .card-title { font-weight:600; }

/* =======================
   11) Date/Time Split Inputs
======================= */
.dt-split { display: flex; gap: 8px; }
.dt-split .form-control { flex: 1 1 0; min-height: 44px; font-size: 16px; }


/* Attachments & Rubric rows — fix button alignment */
.row.g-2.align-items-end.mb-3{
  align-items: flex-start !important;             /* top-align columns */
}

/* LEFT column: input + help stacked */
.row.g-2.align-items-end.mb-3 > [class*="col-"]:first-child{
  display: flex;
  flex-direction: column;
  gap: .35rem;
}
.row.g-2.align-items-end.mb-3 .form-help{
  order: 2;
  margin-top: .15rem;
}

/* RIGHT column: two buttons side-by-side (horizontal) */
.row.g-2.align-items-end.mb-3 > [class*="col-"]:last-child{
  align-self: center;                          /* line up with input top */
  display: grid !important;
  grid-template-columns: auto auto;                /* Preview | Stage */
  gap: .5rem;
  justify-content: start;
  align-items: stretch;
  margin-top: 20px;
}

/* If an inner wrapper (e.g., .d-sm-flex) exists, let buttons join the grid */
.row.g-2.align-items-end.mb-3 > [class*="col-"]:last-child .d-sm-flex{
  display: contents !important;
}

/* Normalize button size to match inputs */
.row.g-2.align-items-end.mb-3 .btn{
  height: 40px;                                    /* close to file input height */
  padding: 0 1rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1.2;
}

/* Mobile: stack buttons */
@media (max-width: 576px){
  .row.g-2.align-items-end.mb-3 > [class*="col-"]:last-child{
    grid-template-columns: 1fr;
  }
}


@media (max-width: 480px) {
  .dt-split { flex-direction: column; }
}

/* Hide original datetime-local but keep accessible */
input[type="datetime-local"].dt-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Larger picker indicator */
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator,
input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  width: 28px; height: 28px; opacity: .9; cursor: pointer;
}

/* =======================
   12) Responsive (Header & Buttons)
======================= */
@media (max-width: 480px) {
  :root { --m-header-gap: 12px; }

  /* header: one row */
  .header-top{
    display:flex !important;
    flex-direction:row !important;
    align-items:center !important;
    justify-content:space-between !important;
    gap:var(--m-header-gap) !important;
    padding:.6rem .8rem !important;
    text-align:left !important;
  }

  .logo-header { display:none !important; }

  .search-box {
    flex:1 1 0 !important;
    min-width:0 !important;
    margin:0 !important;
  }
  .search-box input {
    height:36px !important;
    padding:6px 34px 6px 12px !important;
    font-size:.9rem !important;
    border-radius:28px !important;
  }
  .search-box i { right:10px !important; }

  .profile-btn{
    flex:0 0 auto !important;
    width:auto !important;
    height:44px !important;
    padding:0 .75rem !important;
    margin-left:var(--m-header-gap) !important;
    border-radius:999px !important;
    display:inline-flex !important;
    align-items:center !important;
    justify-content:center !important;
    gap:8px !important;
    max-width:45vw !important;
  }
  .profile-btn i{
    font-size:22px !important;
    flex:0 0 auto !important;
    line-height:1 !important;
  }
  .profile-btn .username{
    display:inline-flex !important;
    align-items:center !important;
    white-space:nowrap !important;
    overflow:hidden !important;
    text-overflow:ellipsis !important;
    max-width:calc(45vw - 28px - 16px) !important;
    font-size:.9rem !important;
    line-height:1.1 !important;
  }
}

@media (max-width: 480px) {
  .dashboard { flex-direction: column; }
  .main { margin-left: 0; width: 100%; }
  .sidebar { width: 100%; position: relative; z-index: 10; }
  .sidebar:hover ~ .main { margin-left: 0; width: 100%; }

  .header-top { flex-direction: column; align-items: stretch; gap: 10px; padding: 0.8rem; text-align: center; }
  .search-box { max-width: 100%; margin: 0; }
  .search-box input { padding: 8px 32px 8px 12px; font-size: 0.9rem; }

  .ui-card { padding: 10px; }
  .ui-card.card-themed .ui-card-head { flex-direction: column; align-items: flex-start; gap: 4px; }
}

@media (max-width: 480px) {
  /* big tappable buttons */
  .btn,
  .back-btn,
  .logout-btn,
  .btn-amber,
  .btn-amber-outline {
    display: block;
    width: 100%;
    min-height: 44px;
    padding: 0.9rem 1rem;
    font-size: 1rem;
    line-height: 1.2;
    border-radius: 14px;
    margin: 10px 0;
    text-align: center;
  }

  .btn i,
  .back-btn i { margin-right: 8px; }

  .btn-group,
  .lesson-nav,
  .content .d-flex,
  .content .btn-toolbar {
    flex-wrap: wrap !important;
    gap: 10px;
  }

  .lesson-nav .btn { min-width: unset; }
  .content .d-flex.gap-2 { gap: 10px !important; }

  .btn-amber,
  .btn-amber-outline,
  .back-btn,
  .logout-btn { border-width: 1px; }
}

/* Tablet */
@media (min-width: 481px) and (max-width: 1280px) {
  .btn,
  .back-btn,
  .btn-amber,
  .btn-amber-outline {
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
    border-radius: 12px;
    margin: 6px 6px 6px 0;
  }
  .lesson-nav .btn { min-width: 120px; }
}
